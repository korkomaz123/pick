# Automatically generated on 2021-09-12 UTC from https://codemagic.io/app/6130a5f1219340b6c1f5f658/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  android:
    name: android
    instance_type: mac_mini
    max_build_duration: 60
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmhQYkRrQnVCdnlKVzJLT2hQU25NNno1dkNWMnp5S3N0dzBQdEFJZkVjbUJJTXhScnpUQ09Ra1JQWjU2bExMSFM5RE9ZMmJ6U0lWbmJjTl9ocml4bXo1c2NjYVdaSzdkNE02Y1QtYTJHU0g1a2V0dzByMENlS0FnS1RKeW5DangtZ2pfWEVOWWVTcS1TWUh3bm12cnBHSVU1VHdRenpGTEozZ0p1Q1NtS0Q0N0t1M0JOaUFYT0tubVVjMEtaRjdhNXl0ZjF2ZkVta19Ua05nNU9lM0s1VUR4c3BfRHJYd1NUZ1FEUHBHeWg0T3pkNTNJOWRzRkI3bVZGTTgycVFuU0loMWRha2RudmxRbVBRVnVBTTV3dHNUWExGV2JycW5zVXFrbURZcGZYNzRfM19JZ2FZQUpXNW1HcDlJd2V5eEdJSm5Tc2JyZmQ2T0hDWDcwaG03WTg4Z3R6Tll6TC1feHhpdmtFVkpFVTlOa0xHekVfVTB4a0psaE1BSTNoRHZhZ0dEOTl6TVZhZmJoS2NHc211R2FvVGNCcFlaWlBEWDRQU2ZwcjNEbG9hQTdMM3VwTGw3Q3EzQ2NoSzNOZzhNMUotaXNQX1lLWjdvMFJzQ2RLZ1hKWUFfM29UTHRBUmRER0RiR0dQWEJwaTJSMUhReFdlTU5EczhoZzJPUU9uZWRvZnJURjgxbFNNOHFsZzlSRm9raDJvanNILW9sVkhyRjFXb3VBZGJBd1YwaHFUWFRLem1XMnBCakV2UnZoTjZCOWxJVFg5LUxFeFdLTkZ2LXdhOWtEZ2p4Y3p0ZW9PLVRWSWFLbEM1WndxVFZhT2hhOFhkMnhTR0s0Y29kbWh3ZUdRWllHamdFeHpYTUg2aFNnSll4SWhwVURnYjduQS1GbDVXVVBLNUZYR3N4TGJYalkyZ1FPMUQ4ZEM5YUx2U3pZd1dUak5LbWVPUXZRaHJmaXJudDdHQzhHRlk1cmxxazAtUTdmMGxRSEtpMWhqM0RtR1Vpa05VN2hPQlVrWWhEczJQb0ZTeVZOaGJNejJsZm5jZXBNQVZJVTA4c1ZLdkdWcnZVSVdvakd4cVp4Z1Zlb3VXVWotWmh6QWxyTjFPVzM1VGFWZzhKZTloRmtrREtEdzBmRFlvdWdCRFlyQzlxNGl1N3VVbHVVUWZNbllva29sak83bE5xcnBxSzhDMUlGSmNBakZ6Tmc2Ry1vblJkTW0tVlY3QnRWWHdkZFlGWmRFblhUY2NwLXl0V0hQLUhneUxEcEpPLS1UY1dqWUZOSWlXUmZuanlRN0gtX2tQblhtaWJrUkh1WHVmNElfX3Q5cm4zcUZzU0txRmZraEU1LVpCTFRheUYwOUdNaHEtTWxTcC1obXNwbDFaVFhvZlMtQWhQU0xFbXNxOUkzVVRubHRPdi1BX05nUWp1TGxad3M0NjBTZm1LbGpPRXZBdFNiNm41X2lxMl9DQ1NfZFBMbDIwT0VyMHZKTzl2NnlkckdUOHNtMmc1OW1HcFBYLVdTd1BiVDJoTm5mZk00XzhuUTI5dXlJRktVb0FNY2NQWWVzR3llanpWR3UybUFaTXV5aDBNVThSa3IzSlF3ZW1UYlNieGpMNWMyNXBubE40MGM0WGN4MG5YRnBKV2ZJU3did29SM1dWbGlwWWVpNkJvU2lDMmxhQXJrS0dkSlVjaFJEY2JNY1JIVUhRSjNwOUlHd1g1UzA4dnF3bzVTWjMtTXN5M3I3S1oyaFdwa3RGSmk0OThQaHZQbkgxNG1VLVludzJOVnNIeW1jamVjaFZnSF9zX3ZhQ0l5dGFYUDVsZ25vZ1lKbzFlYmZJckd5dHNGYnluREdKYzcxZlpwZjBXMjdNNU56c0dHUTFJSmh3QTZNSjFGSTVXc3F6Q1h5ZXZCS2hVNmp3QUd0NG1RREhJY1VRYTYwRlNfRVJ5WTRFUV9tU1FQNTdfcE1tT3JsbWtVeDFYb3NBeXVaaGtyWVpGM2ZsY0hJaEpEODd3RURSTVUtMkx3QmRmenZJT0hyTnRoMjBkbnFrUzk0aTFseVF2VlB3ZU90Wng5WjJ5WFd5YjBuUXVaY2lvWUc2QW9TMVZEZUxFSjNydF9YVUhTMU16TnJadVUwZy1BRGRWUGtZR2hNZ255dGZOeWE4STlteDdLcjNNQ2FaaHJpcUFyOF9JVzNwZHVid3lXOEQ1Y01mZVhKSWdfYVEzMTRqNkhxSmM0dVV5N1QwVzZXS0ZnZ1RRTmw1YzJmT0hnRFFwRV9fMlFzOUVDMnczR1F0RG1BcXVKcmF3bzdxNDVlZnRvUmdUaVRRcWlqYXFvTFUzRHd5Nm9TU0h5OUVlMEhjMW1KS1F4MU82N3dXMHV4NV9zME1FTjUtdmc0TjFvNFJ3dElkRWtuaFMxVk5DZEdyVjRVRGlRdFNlUGxiMHNnejltdkdpRGRrcG90YXlRaTVldzRQbFdzbHdHbjBJZ3lQNUtwVS15TUliM3I4S0NENURVNUpWblNlanh2bW5XRkoyVHZlUnlYTmhlYk5ZZjYxN2xtd0l1djNYakdiY2MtdFM5bXhiVFJYVXpvZU1fbjBlNlJOTGl0aFpXMmtHNVVqUkVUZFcxa2t6OU51Y0Rsa3hXeHFLVmpxa2ZqbUt3RnJLYl9sQ1N2RWJ5MjB1TXZoN0hPMlVPN2JIWXRQMGtiU3Mweng4ZUZwVU5MWWtLVzcydWN2dVdYUmMwZERBX3c0ZFdPb2hYMGdqZVh1TVJzUHktSW55c2JhVjhZTS15R1RfVkJZOTlkZGJiODU5TTR5WFl6OWYtdG5QMmFtR2YwcnhXWUlncFJ1WjNlNWRld3Y5bjQ2MTRYSk9Fblh3Nm82cy0xY012aktEb2RrVm5ERFF5eDdoSkJvdjZPako2TXExSFZQOUpfTE5GM0ptbTBLZkhjVDdGM093Zk03MXJzVG1oX20yeWRrTVNrQkRqcDRhOFN5ajNSUzkzV3YzZ2FxbW5zdk1iZm9vQzhZUXI2ZkRsR1lUTTAzY3FQNzhZUUtwb0w1RU1kUENFNkI2d3hDOXd4MkNVdUNMdFdxR3JtbHF4dS01cUllUVFIdHdDT1lpeC1RQlZRVkdPRmhPakE2NWxUTkc3ZUJGcGQ4MkdTNVZJN2ZjNWlhYVhHaDFZMTNFc0tOOUVkVzh5bnhpTGtVUjZ5b2tpQ05iZUExSW9LdU9sTXA0SlB4SlZjTTFDWWlkX2FEcDdSc0NmeWstdXdIWjNRSWU5cDRlbnFCQnJ4dlJPT3doUkw3d3hXZkZYZU1YcjBhMTVqbmFONVgxdUFoWmtDc0ZGWkhta0VjVlhpUVZwQ0c4NVRxSy00SGNPX0d0SWdvdmtDN0RXdm13ODNPRFg2TlV6MkVadllLSGcyaTVQUGQ3TkV0RWRCdkJMTFlSYVB5UUJUSFRQNzJ3WkNQV0wyS1ZST0l3ckd0aGxDenFOdnBiTHEwWmZlbDhwQk1ybFVIZWJjWEpwV05xVTF2RWE4SVoyM0U5NGxmWW9UVlJtTFB1U09qQ3NJUGNVeElQZ2czZDRCQW1IYnBvMjUyS2tDV0Jod3Ztc0xsVlNJSjRfOENVU1FNbVY5dWxHaGo0YlZJRWZJZk8xaklKdllfM0VyUzFQMERTN1BFd25HSHUxMjUwY3lZeGtaczRHaU5QSTZLb2cyQ2Fnc3lGVDhMSUJMcWVYcTZkVUxsOVA4aGxIVmZTcFl0WUM0bW5hZk12LU5BNGtDR2h1TEU3ZWlISVgxMDBRZ1I4akEyWWdEZTI3TUE1N3dJZklKY3lLOTcySi1Ha2hvOVU3RmdRS3E3a1NybXBiMFE2MkRlWWxBWTNlODhWYTZzV2I4WlFSaU1adHM3bFZRYWpxYTl3ejVFT2FIVkV1M25wOUVsQUNxMFI5cGxUbVdBTS1XdzBUbDU3MTcxbldoWHZ2WGdUTFFiRHNPZEtjdjVkTlVMLUFrZDRwSUtGT29hMDRmUkhaaUR6bnNjUlB0MUliVUUwSThQMHJqQWVXR0EzdlZTbHlMcnhBVUdaUS1BQjB5Z3Z3elpJWUpVOWFZNDVTSUZaY0htTTZLUzJMLUxoU1hKeFJKcHhmWWNBMGVXc1MwaEo4WnBYbTdkUy10cnFnRjZPNW44THlpaWozeFp4ZHNWSnd0SWpzRVEtNjFFY05CVXlGaHFRb0xOeWZCb05FeWJ4WV9SNGpPc3BHZkhlWmlMeEVnbUx5RHlqZTNsNTVpN2JCSlVlTUZ2T3RZemhfMkJYdkJpWERFVjBSOUJ1RFRIT0h4Rm56WWVkcUhuQWlpYmp0XzE2OS1YTFRBUDN4V19DQ09vTWViQ2g1c05kckx2bE1vc3g5bnFoTEc1VlJ2QTJEUUtmdkJJQmJjbDJra1RPaEJ5Y19HY3dlVm1ITnZyM1N6TU1LQ1hhWGNJVG5VcGtFZEpwNGhVMWRXZXdSRHlFRGVIY2lQaFdUclZIVnJSbmpBZDRXWld4ZFh0cXJVNFVzUi1MLVRCV2xPVDc2QzRua01fZVNwMi1mUm9NMElXYUZIWWdrb2d0X1NWaGpLMlctcHdIaVJ1NHJhU0RXWTFzcU1CVkhtVFZpeXRiNDh6b1YwTDFDajJHNGVCbjhGd0dlenhPcDlLaW5rd2VXV3U2MEhqanVwdDExZl9Sa0k0U1cwR01aOEFTdzBWYm1NUnJCR2ppYkRPNlhUZi1adkl3YjJxc1EtNTJ1UEhQSjMxZEtEUTFaVGJ2dVVXal9uLUdVczc3aW0wYXpiUTdyc3VsSGxMYzU1Z3VVWE1IMDgxUEtqSDl2YTg0Z2dzWlU4QWtURmtGNkVIZThwS3FKRm1KSnIxUllCb050NEl5Y0kwbVpKQmlQUVJkUDM0WTNyTnVjSjJtMjR6N2Q3OWlhaC1ldEFCYXFfYXhaNE56c0kwcUl6VXg5X0cxMVJ1T1F1a2tKZHZpd2lNaHZXRVdJNFdYaF9XLWFzMDA3NzItdXAteFZIVUFsRDdVRVNBckJMTGpYeTlJaVdWTTl2cmxOQVNMUkdiY3Q2Nm9ySEhNXzVHNFhpM2NsQWtFeS1rLWYzaVlfWkdLQmpZb2NVRDlWVjJUWkJBUlI5cnU5d05hMUxMSGRxd1FMVUhpbXByMHlGV0FsaVMtbzlrbWxpQUhVUzc1bjdRdXhWcHNHai1yTW1PZFo4MWo1bXZnZjZrNlJvVnRER0R6d2diM3loc1dFUXBuUzhvZFhta0JXeEhSM3F4eHZQZzNxZElwQmg5V003X3FtcEJnMGNuMTFkdHVjVXgybkEzVlU3WWlwdnExdngxT0V2VmFKUmdwMk41enMwZ3RFNmd6Z3I0Z2VabTBLYWd3cndUWXF3ZVhvaVpRREhEVDMyUXNqN00yNUNRaTE4MWpGX2hLNGhHRllOYTNLS3N4MGVkTFlXZDJHNFFaWjNYOC1rcy1rX04zbEFDbFpyTUkzb2JITEpiZHJVMmhpUXIyT0dEX2dsdlVDa2QyczM4elZ6YXF4QkdlaVFQS0FFa1JTd1lITS0xZmFqTG80V3pqTDhNZ1JRUXR3ZEMzeVhBRDk1N1ZibjBsNEZmRFNiZGtDSXJOaFEzTmNOMzI5MmkwUjhocGNXYWNzc21WYnpZVzduZXlTSkFhOFhpVjIzbnJtLXRiM0JvR0s3VFhObUFHYWtJeEV1Y1RMQVlFcXFtUU40RjUyaUh0amZadjlvazNwMHFxUVVfbHZ2MGU5eWJNNVgzZVN6aGI1QmlhRmg1cFpFTjJJR2RSeDdsZUh0QjkweDJhSmZnRHM5TDRvZTY2TlNrQjhQRTlWdkxKYjJ3bktlNVg5SFNHVVhQWHRLaU9TUXpOdXMxc3dpS0d6TmFoV3d2VEgyczhjR0lHWW96WmtRNFdyT0hfUzBtMjJUck5HRFRNd2paMmM5M19QcUJTUUxTdTVVc1MzVzdHV3ZibDhYVWVtVEZIVG9XbFVGSGwxaUFTMkN0T1RpRjNiSGNhaDhfRVNQRUlyeG40Z1UwZ2tFV3B6MTVWLVNaaDQ4VEk4enl2QnRxeDA4NTRvR2RQTk00a1BNdTlrcGZzbU9ObGtkbHo0U2hTMGhqbHozQ0NKNmxva3JLcG1STjNhczNaOHM2T3RGc2lZVkVjVTNSRVhsSlItd3lXR1JmWmVZZU1LcVBwRVdFSDJkM2U1S2lKX0dPOVFSYUtGeXNEYlZ4VmJWY1E3RVo1TkFFbVFwUVkyRU5EUDIwY2dHZ2N0clJ6dlJJZ2RYaEpTcGtBZ0o5azJlRGc9PQ==)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmhQYkRrQUlBOE1PZjQ2LWJKcjVnZkVKM1R3TjkwMlVZekQ2cjBINFRzOVpQTFp2VUhJS0lSeVZmRTV5NDN0cFN5ZVpxR2JLbVNuVE81LTZyTUY2R2txQWlSOXc9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmhQYkRrSHJIQ3ozUnNtRTVXRTFJZHZhWFhWVGtvUVpKOXFEU19iaDRMOUJvdEJNVnl6Z0NJa21Da3ViLUN6ZkNoa0NOcFpDVlFTWW0xLVAxYU1sTTNkSkJDSUE9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmhQYkRrejRvWEtYc01WZDMyR2ppVklWQzJ5SS1BUWRSbTczYXRselhLYTZONFhZY2l1U2RGZGl4QkwxeW92em0tU2wza0o3bVhZRFVYS0Q4UXhnV1ZISW1XRlE9PQ==)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build appbundle --release --build-name=1.6.$PROJECT_BUILD_NUMBER --build-number=$(($BUILD_NUMBER+100))
        --no-shrink
      - |
        # generate signed universal apk with user specified keys
        android-app-bundle build-universal-apk \
          --bundle build/**/outputs/**/*.aab \
          --ks /tmp/keystore.keystore \
          --ks-pass $FCI_KEYSTORE_PASSWORD \
          --ks-key-alias $FCI_KEY_ALIAS \
          --key-pass $FCI_KEY_PASSWORD
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - korkomaz@markaa.com
          - yahia.agwa@gmail.com
          - aidar@markaa.com
          - mjj@tritonian.com
      slack:
        channel: '#development'
        notify_on_build_start: true
      google_play:
        credentials: Encrypted(Z0FBQUFBQmhQYkRsNmpUSS0wY0k2ZHpWdVZrZTFHSFF2dlZXOTJaYTV1cWJLbHVxbEx6RnVEZGtHakFLSU95NTlGdGF4dm9HX0JOVlRIMGVYTU9DUktwOS1mekVGX2lBNm1KNTNkWVBIdjJrUUtMYm5xR1pEWERzNF9RenpaSE5NQjctN09rdUhmaENYa2hYR2NlZ0w0d1JjZ2ktVzJOS2JZSEV4LXBZQWpncU91SExBRExtb3JSdEtxZFdzZGE0al9YVGc5OEJmbGdQcXhTeW9tc1Q2NnA1VlhCYkkzd2lJU0lrNFZKeGJZS3hsaWtTUGhnWk43N3ZESmJwcGY5a25HT2s0ZDI5ZUIzRGxEcXkydHc3blRUOWc5SE1mYXAxbDgybUxINkg3d0p1ZFgwazlJd1RaLTdkazhNdlU3RXdHdXU4dC1fc1BRZW83MEJtTUE2UEEtUWlwQUVQMGkyNmxXbGJ1a0xBNkNaQkYzZmNlY09FeXpqMTJNMFNSY0V0Vl8yaDlGTjFXNUNsMkdoeml4T1ZEZGphdkRUWjh5bmkyWTM1dk85UXQ3RjBGU0VfQXVOZEVGcTFqaWpzSE5DbGE0NVotNTBVbWIyQlpUWGo3VlpLNU9xazlPR3Etd0s3STNuSFV2VVo0bG55MkhDVUhKMjlFT0h3ektkTjdNbWVUREd3Z0s3Qk1IT3hLODlsWlZPUndNNHhmeUIzbGpMd0lDUTFXOVpxLWoydFpLaU42aXIyTXdrNXdBVk9mOHFmT3B4ZVVJMDRBQ2RMTW1vQVNfMHROT1lFRTR1ZVpoMFRLNGxETk4tSVZjOGRVQ192YVRMSldoSGJIcVY4aU5QZnozd0lnc0swX1JMdTl0alNrc2M2RzVzQ0pPR0hkVXBPZTZaemdfRHc4VDc2c2YzaTA5MXRvNFZsQ0RseEg1Y2RMVExPVTdWQkRUallWdmF0ZEdGZmNSSHFYdWI5QzFnVVBENFZWcGViMWlUMm8tM0gzV29leFh5VzdVY2lQa3B0aHF5eURBVHdFVlRRS2VkVFJHdThySml4OVpOb2JWRE9QbXJyVlNoQTNUd3dqdTlpeFB0Z29GRTh2eExaOHA5TGJHUWUwYzNaRmJaU3M0ODVQVlBrd1lic0lPeS1jYmp3d1hadFoyTWZfR09sUndTcWsxY1ZfNnFUSG5QTC01cXFqeFNUekVkUzRORzJ1Y1FiVi01Mm9NRXVodXlJeFp6LVRVUWRiWjBZNTVWUVZzY3l6LXNYQ2FMR21ndDFHS3JtTGg5Y1pEcFdJcVo2QnZmSWNiOTVPY0E5MXBLZjZJNnlRYjh0cVdsNzJWRmlUenVTOWVVanN4dlpYWWg0Q1RRMjN6OGo0bVZXZHNSN2xQNEZRSm8wSWdNdlZYdDdJMmhBenoyTU1TSXV4RkVXbm1oYWIwZEtHeWxkOVBaRWEtM3h0RFpBdndZQVRzV216MjhyREh6MDR2X2hvZGlsYW43Q3hIVmxQTTBlYV9GbTNia3RXb3o2SWFab1pXNnBqbDRHVFFZUjJ5eTZGbkFtZ0dfT3RDb0NyVVRHM3BtZnlCYm5zSmtTLTE3NlozVjVzWkoydUxhQnVIN2pfVC10SXRzTlh1NERZNS03WGV1ajc4aGFvaFJNMnlTakxjTFdTeUVDLTJpMm5qMkcwM1N5T1dQTVZUZkJtRURKLWJZYU5CUE0zQ3Z2SlctcF9ROVRIME9rZDNSeUxRUVNocFFwRE45dWlrVmMwczJ0cjY0eW9xUWQ0dlhYc19jTElKbGw1a21lX2RIRGdKdEJ0R3VHT2FZc0ZHWUtPNnZOMG1HYUR1SXdVaDYzMHdJYm5fbkdYV0QtTWdLZzdnTmhpNXdfUUJMUWw5T0JZNWNwUEtIcjk0Rk1IUHYwU19aSWZqSm9sbnJ4NzBJZmFmSFQ1MUQzcjBJbWxjSUl5VnExMzJDSUt1QWJhZlZNLTg3dkJZYkk0Q1hHVHBmLWozZndYdmx5Zy1Ka2VNWk54MEN5TkxkSWdiekRiWWV6SThPZzRSclctbWY5ZXZScFlvNVRIN1c5bWU1WmlJdjlPVFdTdEk5SDFiRDRDdkE3UUVqc292YlY4QXFzaVVwRFVpdS01RXF5U3pKbVdSYjY5QkxYeDFTSkVsRU5aVHBlZWRyNE51cVZ0T2x0OXRsY0o3alZ0SVMwLUQ2RTUyMUhOd3BxOXh2dmR6WV93dVNNZ1pVR0U5M09EVUdvSXhzdkx5WTdWUzRFdW15SzJtNkJzd1l6Q01DVjZIaVUzXzN0cmg4UXVKRlFnZ1pTZ0JDRzdjcWhTVEthdkd5ay1YenBsRURDQjZDLV9Vc19LcnFNMXlBZlM2NE5LTjY3eF9xWWRYdWluaVZJQWlrTTVRWmM5LWt5LVAyWG9ENzN6YXFCVjNJeG5WSmpRcWI4QXhpNzFydzBGUkpVa2c1SlJUZzVsUWxzSy1GQUQzSVQ0dnZmZGNRZ1VpVGk2NnNXZURxNEtibTQ3bHRZOC1mQi1qOHdHRjRvNkkybnNmRnBpbjZGTVdfTS11aFkxVVI5X21pdGIyak4tal9lbks4b0tsWEs1d3dPNFo3b1IxalI3UVdsWEtYWXA3Wkctazc3X0gtYXl0aDFiQzc3MmZIclBEUWNsQ1h3c1JNaFFWbG84Nmd3ZU1vNjdMM1NsMzBOZ0JhanBVamY4VloxZ3B6ZHZZWWJkQkhxMkNYVmVMdUNqdkRlT3JScjlSMVBtWjc0enY2U1RGQ0t3X3RfTXB3VVZWRklSQUxQR2VxQjNWRm1YUF95blhvNG96eTl4bndzMllNWnI5NFhoRkxpbk1sTW0wTHFsbHpoMmM0YnB3UTU3T0s2blBuQTN6SDBBUUlreElKWVc0MlVwRTl6S1hTRG50bTJlaHBYNFY3VHBnY1Z4ZjFWc1M3aG1sdkdmeXJJUmNSQWZEZmxhanplOXhxNjNSc2p6SVppcnoxMFZlTTYyYlc2bHdETERiUUU1MHZZczhnSWFicGMzRjFwNFRjcFdNQjRLcklzYjdQUmE2OU8zaGs2V0REOFY5TWpxdGJtZ1hha1ljcy1ocm13QkxpcVNqVTNfTmtJcnNXZlN1d01RamdtRkF5WUsyQkhFY0FPZGpOWkMyUFRYdzhRTkxDNjJYcEtUNmcyb01KcGZPa3F4TEUtY3IxWm1IQXhxQ1NwWU55OVBMWElQUFNYRm93LS1nUjlIQVJJWFJaaHhYbFFBc2lYNk41N3htYThfaEVHem4tb1h3Y3lLUEV2MF9uZUFOQW1vOUpSQWRMY19TU0dEVDlzX002S09TNm90QzZHTzNWUXZERE0yNlZDaksybG15dXlUT1BiQXU5MFp0OHptVkQ0OG9yQmxKc0tzMkU2cDdkTmRXODVDVFoycUI4NFdRMzQ5WGRTRzZmMkI0cjdFNi0tbXl4RUZKVFl4Nkg5SHNpVWlDaVhReURKWVlldzlVdWwwLWtFbFp6TFFPSU10ME5iZTVCNTRYM2h6X3Q5RkpRTVJpZXpSa1ZEZ2VFWmFWQTNHOWJSaVBWc3EwWWVTWXN2SXhaOG42Wk1fbUVxcXh6RnluT1l6U0VkLU15YTB3bFAtQ09fQWNkQ1F5R0RGb1J3WldlQ1lXMmY4blJPcmluQzRIclhhQzZlN3R2ZjBLVHl5Z2dDejY1RXFacGN0dnliWXlNWTd3NlZZYUM5Qzg0RU9kMFBsMmR6OFJQNlJnM0dabnc2OEwwVUJQLV9mR0FGQ2RmV3RTeXU2TXJWeV9iNVFjTEF5andHbGVUOGh2M0pHVHVtQWpjZmNGbFEySXZOcGc0UFBwT0ZYa2R2djNfaHpBM0FWUjlPQkgzNHU2Ty1IaUdGdUU2VUpEUm14dVRPN0U0M0oySllqdTB4T0xTXzdsQi1ONjFLU0pES0Z0SHRERUVVRHFhczdtcmlaaDJlbU1lNGFXamg2M3c2SkhuTGVxLV9ZTTIzNjVWZUhwRE9mZ3FnNU9GYUpkc1lrWDZCenJqUENhZlYwZVZHR1czQnU3QmQ1NERxSEhuQXJTV1BhRXZKTmtXb3cwLUJ3NFg0dm51RTl0VnRqR1J1Q0hRWDd0RW41UXhaQ1VZZURlSlpYQ0ZscE1QN2RlZjF4cUpSYW1aTm5ib1pOYVFsTjJxVUJjWkhYVUgwa0xmbGZxUXpEeUEyNURlM3JrMkdzd2I5czk0THcwN3ZzVkFfMVNEMEo1RzVSaHliQ0t0ZjE5bFpvc0RYNHoyVVVuYXZDWlhWYTRON0p3Q0t4cUVOelBacVpmTEhGOEdKR0ZpSmN3PT0=)
        track: production
        in_app_update_priority: 5
  ios:
    name: ios
    max_build_duration: 60
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: 21ebe567-d10d-4219-9262-5279b919da03
        APP_STORE_CONNECT_KEY_IDENTIFIER: 55V39U5XP6
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhQYkRsczBJUkxINlB4VEJRemt5UU9Uck5fbGFoMDROcmlJbGdueW1GSGhlWktuRGpNVnhUMWhfOHl3ZHFfb01sNld6Y1ctQXpVVV9Vd0NzUWdzODRDR2l1RFFwUFZtYWFQbnN0T21CclQzczk4c20xRmxFdlNTTEZqMFR2QWNOMDYwY2pzbmxHdk92clhsRlFJUUJxa2gzVzZ4cW5zV0VBNmlhUm1maHBpOUdIbmg5WHRGeXhaSU90dUtGajNMa3MtQ3JKN1d5NGx6amUtOUFYaFZ2T2gzWUswTGFFYzlia0J1aGtmN1cxSml2OUtXdmszRFg3cVItQnM4QVdoZXNHNlVJeTVUYUtlZnV3d0FzdWZiUEJ5UFlhSjJDMEhWQzZybG85dkhDTXdVOHFUVzZoVFotLXRTWXUxNmttSTVvVEVMd1ZkUDZYR2VLNEtqMWFPcXpmUFVURzllMWFoNVJsSVlPZnlKVWZ5Y1F5MzZaR3RpRzJCUldrVUQzeW54eHZiTHRGVXhGWVBMWlZqelhIb1BPNm9NdjE3WTVHbG5aN0RjNW45QjRqMkVDRHl3bz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhQYkRscUVXeDR0dXhIenFUYk1VZVFyQldxR2IzSGYzSUxDdGZHQWhVLTduMXlzaExZTUFtTXhlZnl0TmJ2TzZzSjM5aGh1N1hHeDlHUFBrcGs1YmZROVd5X05ZS29ZWjJpYmtlbnhtM3NwajRVX1V1YjA0OVVib0pUWm1HblVMX2wzNmgyNGRkTXNGTUJDUVd3bzY1UmdVd20xUE94MnpqR1hEWnFxQWs0ZU5oRi10bHNONVo3ZVBsWS1ac25wdFBpeDZVQXU4ZTFTbERJbkx3WUtEYlBaNTdpc01rOTBlMG43NEJ5YTFUbmxmN0JWU2g4akNwR1gydWhXQTBNdXB3eGpscGZoQVNqNWhaemhKOUwwdUpETExqS3FmeElZZ3lNTG9CcXdoYVZzN094RzVUTGluTDdvZlJiQVVBa09YSUtFZTg4U1FhZkxSaTZTSU5IbnlpVGgtelhxaUJCR2ozOUZsMFp2Y0hWem9kUUxvX3JYeWZkRDJ3Y0RrZXdrUV9SQzBPZmoxUUJTZWlqSXpWemJKTkhzN1Jhd25iUFpqVGd6UGZERnNqSERyNFdKUW84d2ZuYlRKU2hzeDJWYW1FZXB0Z1I0MDZYYnJuLXNzT1RhQjVlNnJYa2h6ekwtcW5pN3Y2M2llRkJKajhfaDZKM1E0U0pTNmtvYU1Vc3JmY0w3Sm50eGF1UEhrZHhmb21ndnJsd2ptQzExdWZHelJSMWJ1MzJsSVpZMnpLVHZqVFU1bTVqN1BkOW5NdkROcDNQdnliNmFicm9aZVFLamUydWNnVlpjMG1yb05QTWtLOFdid0hIa1E4N2tOT3dmXzFBazUwVHhHTERLeHRLVjlwV193Vm1vcEZtZFVKM255VVpQNm5WSXEzMDhyQmdrN0hPb3JjQVB3X2FNOHVwbGRreHFzOHRUeVQ4UFAzSXNmajdlNnJIVGFVZFE5THZ6UGhpR1dyNldaTDhNbFU0dGg5QnFzTk00WlROUmNTTzBPcjhjeER1MFdFT2xWdGk1Nl83U2xRMURxTVJXN2t6a3luTFAyaGlrQXZUcjFuazl4NU94Z1IzdWgtbkFQRndnNlR5dlM0YVE2am11WWRDV09hUTU5S3FVR2duV0ZiT0NJTXotY2I0SXpTNDlTcUJ0X1cwUDA4cm42aG5RT3VaOEdhTzl2dzIzNWg3VzFINDNfMVBXWG1KbDNxZXVkOVZqUkxfU2ZkaWtOQmpOOHhuMDZ3b084VzVPZV96OHU4OFRXSlMxbHJKeGRobHJGdF9QN0V6cmN6bFd5TGZsdkJ1bFBRcHJDdFlmYlZYRjhqTGQ1bmxZNkY0ZjBmMWx1OEdaQjJZTnBHbS1jTU1oY0lKVEZCNzNqUjR3N2pSSFJqSnY1UUozdjhJYjY2MXlNeEhXX2drUVlVM2lTMURSekk0Q2NQZVdnb1FTZUw5a3Zva2pPSUpoblRPYkw0VXFMbWFIdDVnM25NOU1EbkczQ1h3bWxIN1FSaDZXS3RHRkk0TnNNcGxTVXkyeklkNFo1WGxGNkUwRlp6aXAzR1ljQlI0SHRpT0hvYjVlMVFueTJBWFdjRDVCYXlLRHZ0MXRGNTFmRHpjSmFISlBHamtDNjNxQnU2UW9DUGJ3RU5BNUV1eksxdW1zMmFLRldZbzhVdVJuOE9ITUxBcWhCOVN3U1BYeVFxTGdFUEpwNTRlbWpOd2lIcHF4RmJLa0VtTFkycDBzYm9MSDZud2E2Znc1dk1ScGJaUG9vWWQzLTgxQXFVSnBUcWNOTi1QZkVQS1NrUlVsaVhOUk5DNnJGcDZac3F4Wm1zQTNBNGt6ZWpZUXFvUXI1aHpyUFJJdTl0T2xPX3JmX09SZ2MyVGtLX0FSaU9idTZ0M24wakZyQW0wTUs4ZDJHMTdyNkYtSzRfd0ZSd1pOZHVjc3hTVW00RE5VUUFHeWhVZWZvSy1iUVJaRjNRVmY0Rk1oM0lrcWhFT2p5Q1hoMTZva3NTcTBILUwtM2pMSGRSVmdtb0FIQ1V2MHV3aFRha1dXSkpOWHFwenktZll4aWtZVkJpRnpuSGRvYkN1OEZCS0dnZExaSkJaUF9rMU5vakxrSnZrOUVrX2FPc25KOUVWUS1HYnp1RkR5TjZYcjF1UFF2UnhhNVAwRFNVaTE5Tk40cmVaeXhaV2ZlR0wzMl9mWTFJMVFudlJGaEdfTlNsWjZsR3ZYRWdsaWd2S1EyTDg1Sm1PbDRvSXNaZ3JSNjl1WDN5alBhYTN1d1NBdzJjbXR0TExCMWNXYWlNTUFJeWtaMmk1MlhabUpRNWlzNzBwRVNYT2ZLbGZKU0RoYmhBdHRiNHlZbjVGRWtRVXZnMW9NeDBYUzcyWWpDVnYwblpzTE1hek5iN09wSm9tZDQ1YUdEOEx2U2RxakxRaEFEeWRJcXBrTEhFcTZUSzR1TDViN2s2M0E4cmZ6VG5IdW53dmRIbDY3OThJM1hRZWU3Uk9aSUkwY1RDQWpRWEFhUG1WY2pseWxubldqa0VOSjh1eXRDX1ZqYnlYSGcwcExSa01vTnIwWmpwTWlzaEJnc1dncHdLMGw4d0ZSNlllUjZ3RkdONlRoUDVJVzdsV2x4VGVxcERZY2lXbWhFR0N1Q0RvQWV2LTFNb2xCekEycHRaUWl0UFBxUk1TM0gzNVRjSjRod3ZndGlYVG9QYXBtTExBaGkwZkI5dm91ZVBkNmVPTE9qVWFuRmhfeVozTlhVUVkzR2VOSTNrc2s2LUdhSlM0UHhsWEI3STV5SWFLdVo2NlhFZkRfUkV0cHBIdS1lVVdYaVhGUmIxUkt6YVduWHpPV251VEJNbkVsTG1McV9VVC1iQkxpOFg3c20xajc3ZHpSbGFPcG9lMDJheE1IXzlVWXJtemFaZ2ZYMUw0X1B3RHp3b1JOSGQ2ZzFHWmdzdHNSUDBma2MxZS1HajI3clNVa1Npd2hvdGlNVzRBd3NhWmJ2WW0zWC0yLW5KZFdGV2RRMVRhbnE4c3A2LUFBRWlHZlk0QW9ZRVZpRDFWb2hMUVZ0dGhQVjZUOGozRVZIeXJVSGlHVkVVZ19DTVpyU0JnaFJY)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - flutter pub get
      - |
        #!/bin/sh
        set -e
        set -x

        cd $FCI_BUILD_DIR/ios
        agvtool new-version -all $(($BUILD_NUMBER + 1))
      - find . -name "Podfile" -execdir pod install --repo-update \;
      - keychain initialize
      - app-store-connect fetch-signing-files "com.markaa.shop" --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --release --build-name=1.6.$PROJECT_BUILD_NUMBER --build-number=$(($BUILD_NUMBER+100))
    artifacts:
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - korkomaz@markaa.com
          - yahia.agwa@gmail.com
          - aidar@markaa.com
          - mjj@tritonian.com
  both-[android,ios]:
    name: both [android,ios]
    instance_type: mac_pro
    max_build_duration: 75
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmhQYkRsNnZaWVN6VlozN2NQZFdHWG95S2lSOWdxR3Rkam5WYnJxdlZoaFNDcW92dkprem9TeFltZkQtdUlaQXp6aUM1QVZUamhOOEw5Yk9JWE53RzNERkxxY2wySno5OXdUbS1fOU5rTnFCNk1UVTktaWdRMzdSMXAxSl9JeTlESW9JU2VwZkxDc0Q0TDVfWkU3RmdyU3lfQlBKVy1nMWVxWEYxSlFLQ1pDQ0o4ejRuZUdaUlctR25XcHF6WGh5SF9RSkljVWJCVXlmT01NZUNCRV9lc3JsTy10UlpYSjBpMktXLXFYdC0yYXZCUXBkNm1zSTljeWg2anYtakZiQ09PRkdLOU9mUW9Td1k2VkFLVDI0YmJUbFlaNjNGLUN1MUVOak9WY3RQWGlhUUZvSXNJbnRGVXNDTWZ5aTNUOHhtaU9sdEJFNDlMc0hEbURqZ3pNdGFvZmlRSlRNLXowVEZLWjlEbTVGaDlSZVJFdHRva1I2WFFxLWFCc2tfMW81NEVyVkxXb1N1Wk0zdE9GY0doYWMyOUw1akdWX3pDVTR0SjF0S0pYbDY4cndjWUx3bUNXSlo4VEZUeGFHRHk3a1NEM1NPUnI1QWo5ZkhVZmQ1ZlJuemdRRlhDTWhJTjdYZy02T2VJQWhDWXVMN2NvT0ZsbGVCdEw5MVo1a1ROM0M3U0VFWEZsdm56emJyRHZvNDRTam1rVnd4bDlaVG9sMVhhQlVKcEY0NjRpblJ2OE9jeHljb1V2VVA1YTI3LUlqT29JRGV3anZnaWNrSTRLcVU2Y3BWQ1hZa2ZxT2tVb2JiLUR3b0lXRUtHNzc5ZFpqUHRYRU5aald5TVFUa2k3VklVa19mN2hBODlBaGRQM2ZxWHlpS2R2Z1UwY2hfcm1wb0dwa2Y3R1E0aEU4QWVOc2ZVQW1xYkh5eWRXYVQyYks3YnpVMloyTVBNb2xCQ2s1YUU3ejBvbkk2d1NfSF9INXhFVzlwSVVZLU1UZERSYi1LZ3NIUWRDY2xqem1NQ2RvVDVMRmIxLTNSN0w4NDF3b2RMV2p2TWh4TEtpbXh6SFlyejFfMGFQRHFxUFF5MkJuUUs4akJJanEzTjZSampiUy1RUnBFWlZScnhaUjl1dUFNVEV1NDFoWmdpUmZLQS03d3RYMV96ZUtya1hzaVpqVTZZUFZJaWFhWjd1azFacVUzX05hem1BV0Rubno3b0pSTm1vS1BJWnNmam5MWjR2OFNDeFhkLWY1c0VfdUFGNXRfQzJWV09JMi1QemZaVkRMd3p4TEo0elg0ZHdoS0dEQXFkRDYyUUFDZzI0OS1XQnJENUstcDIzTTY3VUU4Tm1mdG1CM1YtNmYwNDhkY3VNano0S09RMlRFR0JDYTVvYko3bFdrZy0zdmxfNV92TVM2OWs2YnF6TnNNZVp0NjlEXzZ4S21sUDBycDdZOTZwSk43RUtwZ2FlU2N5aHJrSTBiYmRjSmpQU3AzSmZadm5ta2pNOFVtNy0zVE5qSFl2cW5DRkdEYzFCZ2Jkc1hjOEttZlA3UjVNMDBjaklxWWMwQnlBMzJDVTJUcVZvNDdHR25LNjdhdlF5UXJRYkRKdUFfOHduZXRZdGJpcHoxeGwtbXppSC1VWnhpQmhPQUM2NjBFbnFyVGJ0azlIOE1mUTcxVWVMY0ZCeHM0VUZENnRXSnhsMFhUSmg0R2xzbHFwVzROOGwyNXFycU1BV2RUb0ZvZ0ZxTWlHVXJhdG92bk1JTnpKZ281MHNGTzAyVW9oenpuWkFEcmRkOU5LM0lHdXF5bFVNNjFNMVAxVnNvbTVXajRBb2tPZ0dVNHNiZHdYUHlPR1N6MzBpYmNRNUI5RHZrN0c0Q3Zxblh6S0lWb2hIMVZ3LWQySzctZ2poSVF4NzZLb1pEMWN1bUN6ZGNmTkM0YkJXWEZ1X29YZUFTVTllZ1hadmpqUHpxWHIyYmtGODBQVWFwSkd6Q0hudHdPY3htR3BDdW1uZ0JSX1NVaWFKaHdRR25DQXZ0ZDdvZHdadW1sWU5nbHZoRmwyTG05TmVjUTdlRmNIb1F3N25tVGhJZm44a0FVUEVOckJQZDlDMUJlZmtReWt6dzJzdUhmQkFxUXhLbDd5a0EtTlBxWkJuVV9INWpKak01QWlaUjIyZmxpRUh2QWdKbkNjeTZ1Q0xHSGNMY0ZmT3czZDRVTDJiazhRQ08tdTYxaWRxMjRoRTFDSGQxSm95WWdRS0FHdi0tbEY5Q3ZkZnB3OG40VXhUZmtiSHNRUk5nZ3A1c0JKZVlIY2QwXzczbmZhN2hKTmxBRnRmQ1RzTGY3QXBFVThHcHlvM2xEWm5NeUc1YmdUT3RObEhZWWF3TXg0V0xLOW1uSHVsOXNCQzgtcVAxYUpheWhCdk5OQTlGNGJXWHpTaVNHRTZvTU03Smh0ODBSaGRQb3liNGhyVnkzRUZETkFNak9NQkJLRmVEUHAyWmNTR0QwbzNiZ0JuU2Ywbk5rRHJLNFd3eGVKS2xZWWdWMTQ5R0liNWVNQ2s3bnJGeHVaMzZsZWh0T3N2Tmlla003YWMxVDhhUGg3QnBKUlNiN2tlUVgxalRVWE1uVmRra3RfNDd3SkpaM2doVmtmbk5WZml3X0FDd0dwR05Ud1NlQmh1NjN1bUFBU1lNa09yWFRkWEt1b2lVenNiTWhaOTVPUXR1bjhacjJoMUU5bGN5Y1JpbWVyck0tbnNPSDB4UWVJaXFqbDJSZUR3aHczclpiWnJubldOZ2xQOWNvRmRMaDlsdldMN1hBR29LYVdUcmpiTEVMUVBxTFgxd3pLX2EyNTVpaFJTOGpucjJOZHFvQUQ2UnlJRWp6bXFkR2xDR3VmRFlJY3ZEQUw5alVtQXRJQmkwY0FTSC1uR1liczhLN0l0ZXJ1YmJpNTZtNVo0NDE2RlQzZmtJX202MUVsdFduRkd6NHBmVVBoTkozWGE2YkF6RmdfYTMwMUliM2xVSlVtc0x0VHZzTU5ZeDFiWGN4UlZ2aFJYU0NBVURHV0NqZ0JYTUlpa2NPbHI0SW93bjYyamZ5di1UZXVLRFRjSnhaRHdoNmxuT2tCR0NzUDFkdlNGaE55bFQ4VzBYcHFLM0dFQ0J3YVh2czVVQ2t2V25IVkMzVGlCR1c3RkJMRkxJSm9HU2JkUF9BcHVBcFlKY01RYnFpNjVHdHlKUVQtVUE3MEpYX1Ria0l2OXNTa0MtV0xGUFFmQ2dfblphTk04dVVpVGpiUmNhVy15OF9VTC1JajFsNjl2NHdCU1pQMWlfQnFodkdXSHY1dlUzbFhpeXgwN1lXOXhMcXlSQmNiWFJJRGhfcFRMQVk1S3hUZURVRFFwd0JvSU9KcE9yTUNZWTlsTlk4RWJxanhabkdMSVVQV0xjeDlmODZjVTBXUXd4djk2TjJrcTZzT015QkU2NUlBN2FzNVFOeE5KTTlISUR4UGQ3VWQzRVZIN3Y4aDFoSmt6TU41Q1JYaURtTjNST2xnS2RRT2V1eHRaSU1zaFhnb28xX3hhS3lhQVg2OXNWdExxakJWZzNNWnlFY0ltLVdTV0VKREoxT1ViV0dSSXNhT2J2djUtWkN3QURlTmtJcndjcFFvUmhocnVkVXYyVnFLaVJaZ2FST2lJZFdkR0oyNkVFYlQ5X1N5QklqSkQ4RDNac2hMY01PZkdQN0E4aXhYSmZuUDV6bFB2dW9lNTFVcXl1dGQ5LXloLTRidEpUUDFXbXFjSFp0eWJjam5ZT0ZIVkh6aEFJdFJWMkpZZWcyTXJRUFl4TG9CMjVzZ3E4X0V6ZExjUXAzakZmYTU2V0g0WWM0Q2tpZ19SYmpkNHdiYTRrcnlRUzV2WU00dHBCc3U4YlhKYWNaSVJQQUhyeS1JWXNiWkRqMlRSeTRjV2ljNzY5LXRVMWtXcTF3VExSMlVzT2pXR3RHc1A4R01JYjdCeTZkUG5WaF8tZmZTdDF5REowWjRKbG9HeEw1SjlrSDlWU1NOLS1VN2FWZkZjbE1QMDAwWHJqRVdTMmlRUzgwS1FIRFZCNUl5ZUVqQjFRNzVZZnZHMXZWNFE1cWlpZE9IZlA3dzduNjBfQ1pPaV9SZkJGOUI2YWRkZENZUVU0VmdONzRiR1BKM1RLdzh2ZE1nT2taS3hBUWZ5Z1RCeVhzcjhkUTd0VGNFVHVKZk44ZEE0blBxS3g3dVh2NzRhMFhmTkRlZUJHSEpHS3FNbXlLRmhDdGlMS3VFY1AyUTNsSzJEWU5OQ1BiaFNlSU5YSkl0blJxNFQ0d1UyaGEtTGYzTnMxaUk3b0o5TWlzZEM4Q1dFS29DamZ3dS1QTzF6eGtCTTFRdThyUEU1SUNRNlVjanhRYnZqTVR2eGZabzk1djVkTHQ4U25EbXREZ3REOGdZT1ZPUlhoNUVoR1FWeVZ2dEVpeHFkQ2lBdldsQmlOeWFWSGhGT1ZQblZGc2JTOG1tazNTYm9Vc3JsN0s4dWVYV0FFYnhfOGlPS3gybUpvR2Z5cjlnemg2SF82XzM1VFM4Y3RpYksxb0VPMVJ1dlp5WVktOVdYLVdJUGxqLUxJR3N3elg3dFFsdmdDSVZQVXZEcHVsemU3a2NQSVk5OEVFSUs3Y2FTZVpuTzdfNVZEOWdDWlNjMWJxbW9VNFE0OGRfa0dJZjFES1JOT19kU0dlNE5Sb2Q2dnhTd0thWEdpZzdjbjFacGFZRWRzOXNkTTFBZXhobUF1ZWU0NFMtazNfOEwxMlR6VlB6a2JTX2ZmYjBoc1lReWdVZ3VmLWpRQWM1YzRJNmNjcFFUa25xX1VfQi1KM29XTmR2Q2oycDVHN1hLYVVObkxKRW5LaTBGU0VBX3BpZE9YMGoyMjZwYnFac1NSU1dQQ2RrZGlNRmFKMy11NGZuY1ljTDl0Qy1wWEd5a3pNbTBWc1c2UjBTTzFONFZwSXJoUnFRUFA2Z0NJVTlfMFhYeVVUZ2xqQmhzWW1NakttbFU4S1VDX2RkUVdzZkRBMGlSd1VPLTMwUlhiRXpwVUVvUHNXb3p0VHZtdko5STFCWFhrVmtRYzhTUWhpN2l3b3g2U3pPU29hcW5TelVpTnVOQkNhU3l3bTItUW9CcXl4b1BZMnREUTFkanlURWRxQU5fU2J2N1IxOHlTdmE2V0hXdFVXcXdONEc3SFc1cDJCNXV6ZWxkZmJoY2dpN05TN01GcF96RWJCTnhSR2lGRlV4ekFRSE1FelVWU1hsdFNvSkgtbTd5anJNd1U5WkdrTzJKRlJUdFdKeVRhVHk2cDFRX2NVdnZHTFBOLVFndVRPcE9oLU5aODNPdGpZdWVib3Z5Q1dnX2JvTGNPN3FFUWN4NFZsQ19nbUhMYUROZ3pCbE9EQ1BGSjlHbVFlRmpqaG16ckdhdGkyMHNYVXRXY2dFR08wb2xOMDEtLWZQQVZDVmprTjFlQkNJeU9XNEtJX3JSenEwMUhLd1pOMUVsYVFMVUIwOV9XQk83dENFUmVITTI5c2ZTdTZUWFdQY2E4c1dYQ1hMTVozSVFaVnB2cDNCaHd1ZWFNaE5IMzIzV1ljTDk5aFpQeHpwdUZkUFZMdFl1bmZlRFpsU01tQzlyMEF1dVN1c0pKcmJqRGNhZUwzbWU4ZDlweWViUG1qeGZFZHlnUWllQm5WZE5manJiSERVTkhhS005VXVPTDNDaGlZQmw0Y3o1bVdVMjVrZV9fa3dzQ3JWdDk4aVMta0J0TzVoUUd0Wm81Q2pnR1pLOXZPWjA1cFl2VDZLRDlIcXlnN25wMGFQRFcxRUpXaENfUWdNV1BlNHRPMXE5V1FXWTF5ZEYtbkk0UXNqMWhRcV9ianpJR201a0loQ1BQcFNZWnRQZ1V4dkxmRDdYWkVhMFhFVmRBQWdReUZoYXRCdnRHbU1ablJMZkZlVDNaN2c4WkFBc29ONTVKdkFIWTdrUDZLTlM3bkpTMDdURk1xdmo5cXNWclI3SFVFYmRPdHVjdmM3SnNOWGJPSnRfbEtFcFQ2NGpTUTZuQnRnemtab1BOU3RUMXFjNkJwTjRuMTV3S19nMGw2NmNYb2RJTXppNWhULWRBMVptcXlzaGNfbEVIdGloQVpLOEJvQW1GWVpzZnYwX0VKMGZuR0JtOE5NWHlRenpFeFJOdklPbnJsd08xU1ZyeXZ3UGN5Wk0wRmVqRzFVclc1NXladTQtdFRTeW80Ny1uc2JXODVlU1ZWc0dUcExqdEI4SHZZZVN3Ym5GbHBUeGdadnh1NEJobkVrR2dZZ3V4eXFrWHJpdXc9PQ==)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmhQYkRsa20wdC1fWC13QlNVQWdiazF0NktjOTAzSVc2ejhNb0ZuX09SZ2s0TThzVTZab0RsSTktNWlSSXFKNm15MGxSdUhyTDlhU2pTZ2pMOVBzaXNiaHA0WkE9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmhQYkRsVkpJOVNjMWd1UnlJdWFzSTdkNDZlVzN5dUliTTloZ1VTQy1QYWw1WURncno1ZG9kS1ZWY1RFMklaQm5DcGtwc3phUkdRZS01YVQ3bVBUbTFaWHNiZ0E9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmhQYkRsTF9yT2FfYkN3QnpnRTdOUEZZLXRlc2plc3dTZkdYSkowdS1ZZ3IzTEhZUF9veHZBc1FCR0o4VkQ2U09RQUYydm5ONWczRTNScGdkOFAxcmhaUmUxSmc9PQ==)
        APP_STORE_CONNECT_ISSUER_ID: 21ebe567-d10d-4219-9262-5279b919da03
        APP_STORE_CONNECT_KEY_IDENTIFIER: 55V39U5XP6
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhQYkRsVVg2N0hJZzJmYm5zTGlJbXVLcUVzNzg1N2l4WDhfU2hsOUlwazZ0emZhcWRTTnBoM3F3R0gyRUhTQXR4TVViTFo4dk9reE4zMHpuTjhoTDZCR1VETnR0eGg5VWVONGpzcVJoU1F4MGFLZUJzQUJFcVlDOWRCVWdQdG1lbmdmclpoa0k4cnRQUUhfRC1yUHJ2OWdab3JJZTZ4VXNJS2MyR1hYVHFfbnE5d2N1VXFJemJQaDIzazNZMllfTUg5QTlvdG5ZSVRJdG9XRVlOMVExOGs0LXBhcFRob3VnUXUyX2NwOVdSVkhIMkJ1LVpiQ28xdi1iWE4tTVZsRFdfUmU5R01NanVPTVh2RGZFcTRBbXVWZHRCMkhhaktSRzFlaW85WEdpd0RyTGxyQVJiYk5SRmNaVGk2elhiMFBmUVNxVlQ4MGtfaU5BVmZaZVlSNVZaSFNWQ1JBeGN0V0V6QTYtRnZOcGluNFFFVXpDY2pOaC1wYXZQLW1HeHFqSHhZd2pOb2FpMWxnT3p6WHlxMVNUZGhyRW81azdYNHZVM2tlLUVpb3VnZjhKUnROZz0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmhQYkRsT0FaWllWVVB2RTJZXzFmY2ZPS0J0eXhDR2RjQkpSYXg0ZnZSem44d1laRmd6eTB4MVBXNWhhMEFraHotTFJ4bU9PbUN6NW5wSjR2Nk12OWZTZ1lhcXdOWXVETWRBUTNXQ3dXZElPNXZyN1dScG94QjdfR280M1RaZi1aaVVZejlJUW9OeWFGU3J4QmlaZ3F5YXN5YzVnOGNkMjNaN1BxM01HT19XNXJWMnBkNzBSd0YxOXVfZ1pxbzRDVEZXeHQzcTNrN2MyQk1YXzgtYlNQUXRXMW1mV2EtanVEcm9HRU01d2xqdU1PbUxsV2RHT1JTa1NGZ01rcEdZVWdYZkZ1N3hXXzJTVEoxRDVZU3JGblpnTXBRY2RPOXpobkFtNFg1dUw1RnFrQnlaUVZFQWNXWXdLS05SQlVNTXFQMzF2N3RBMGZrYUZwOVgwbXZVTHU2TWROT1k5WHZBSU01MHh3T1o0azdGdkVjaGNTQWNDV29ldVRBQl9DRC1IOExfZmphQVlabVB2NlJpcWJlejlWV1A2UDdLYzVST0JGZVc5TkZmYlVFX0ZPRWlIcjJEUHl2d3BiS05Td2c4TmFwZmI5SFY0ZGtfNVEzSXNiYVRzdVVjYjRfbmhQWDduYjNRckhZOXBlWXM0Q1MxeDY2blJUenU1eEdMWFgwcktQMjlvNHpRWkx0NFAtd25US21CUEpsSll2ZmNkMDFMa1BBaC1fLWstd0xabXJaZ0pjSFVqRmFXdU9UeWxRUzd5MHlTZlNlUjZMRHQyVlVRUEJKMXZwLXZKMUdRcnRPV1pqNTIzY2JGRWRNNDBMYjNVSUUydDk1TEpKZWxnWElxUGNNLV9MR0gxd3ctM0VZakRSM0tnNzZRTW9VdV85eG9YOHJBYVFPTWxzbkVReTMxT3QtdWFJOFRBNG5jU3IybjVwdURocHhoWENxVlkwcjdFdWlycnFLZGVRUDVYSmsyYWg2SVcwLWxvSl9CUGc2WlA4c0VYRGhWbTNGNW9XVTBvY2FqajRsUDk2VE4xZTF6UUJsX3Q4REtaQWg4RC1zaFBfYUViZTRSMEI0NXRQeXB4NEtiN1laanpDc054S29lMVZtX3BBNXBZUzU5WmNlYjJyeFhvMi1CQ1lLX2VQeF9DUnBuNVk0NWNrNjVTdm5qYjEwc01ELTBUbWw5RXlXQXMyeUNYeW5CQkFxM1FMWGE0bnlXLW5QaU9BbWxrWGNKZGFxeDN1bXFteWxUcFZ6bkRqa08yMTFkMjBma2FpTERfTGFWcGU1dzhmZkRkTkZPU2FycGVGM0ZFaThWQkdqUkJKUFRlQWk5cEZHb21Ic2hmYTJtQTBfcTZtMlVqV2FoOXI2VUc4NTFBNExCN3dtQ2t4S21KWVJjMHg0R2NOSy1oMXR0YTN2XzJTNXNSeGo4SmpkdXhZMThpR3FjMXZoOU9UVXBFNkZUeHRsVHdIOE5fdEpUZGZ6a3RSV1VYMnNNM3RoanpJTWU3Y2Q2c0VkWTgwWTRONUhvcjI4ZDk2ZlA4QXE3SUlnRTNtTGVkOEg0emFXRVdRWHVLMTViOXJKem1BaklHQXdlVWJSVlhZOHg2UnZnOFN1UjA3RmNzSzNxY3ZkeW8xYnhZVmh6Sm5wTkJfcU1JYWVMZ201Tl9PWDhXQU1aNkl0SDRMWGFEY1hHSWlZb0dvS095UjZqNHRuYWVkTTVKNGtWUy1BamtWUTRFa095Rk9NcTBRTnRTcXZpS0tzRmFSQmlmLW9VOHYyVUl6VGVsNTlRUnhBNTBBdmNBRXhlalBwZkdhSlFPb3RsYXBNZ0VmZE9kQklQX0VMNFVhYzRSQmFWWURURXIyRXZTbUxtWFZXU2NPQW1qMGFoQnkzbW5qS1pGSnJKNlEwa1pER0IzalRzcU9GcU9YTkpJb3VNUG9xdzBJOGx1aVZPXzZ3dkJldFBkOTVHSm5WNkIzRE54SWlRWFFQTDJsaVJIRG1FR2JmU1BsTTRrdU8zU0doM0pqLU9LVHkzS21IV1NTaU5ZeFpiTHM3MlpEWXEyVWFuSEdiNmZTblB1MTMtVXVGcjlYMnJaaTc2U1A4U3ZtcVZqMF9EZEhKcEpIUEhDQWl6ekNKdFVva0M5UWVJaDR1ZThBeGI1RGNnSnpSVEpaOUlhanNjb3IwVGdhV1NUOXRHeVY2alVUTzR4Q21oODZfRzF0Ylk2dmR2NUJ5WWxrTlJYRi1UVWtiTEVmbmxKbFJIcVB1UW51RDZEbzNwSWZOdG9mZU56T3NqQm9TbnBXT2FUSmhlRk5qamlFODNCSldKTHhnSGxQTXZscmZpc2tlWjhpdERiQjhzM04tN1N5TER4Sjg1UHhYR0NLS2k3d2NYNXRwLTZCNVRFdWJHS3hPdGtXRkZ2ZlJrd1lMRG5LVzRwVmVzdTRLLVRseDhuSGxRT2pQOEpnNkhNUDRqOHRqNEVmTlR6eE5qT01USWVpWEw2YkFPMi1uTzMyNUsxTG9DWF80T19OX1lfQnJ3cTFUQk1aRU9Ia2libGROWmI0Rkh5dXB3NU0wbVFlbEViaC1sOURmdFNaTGdyS1BnTTBFZ2RqcExyZm5RZzJEV1lkUHZYel9zVW9EVHl3Z293RVljZGsydXRGclE4a1d1WHhtUFBBOWRBcUdlLTdjZTF2X1U3QWN4RGVESjQ4OVFtRDEzb0gzVldsNUlZUjZ4SEw1eVNQdUhyWUExcFI1eG0xdFp6N2o0aXlXd25sVUd0YlE1cW52RXdnMWdnVmJQZ2N2NF9HR1dnMlp3bHFTd002NE1VZDZCU2o3M1RUd0pYc1JtWGN6NGtuREFRQnZMcmRpV1BXcEtKTlpBeHVaaWI3dU9sT1hGVmxlRDRRMU9vamVUZ2ZDMmZwMG5SZjYxaGpXZkdXdTB4LXVJSl9TYTNCZHdvM1ZVRVBmYkFVX0tPdlZGdXlnWWYxVk5xWmd5ZndvdlRtQlFUQkFWdmt0RE5vYzgyNFVRZlJOLU1OVVotblBJQlNXMVl0TUpYQkZUNUgtVnppaFByWnE2eXBzTGZBeEFUVlVpd0M4Ukx3SEhDZE9ybG9v)
      flutter: stable
      xcode: latest
      cocoapods: default
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - flutter packages pub get
      - flutter build appbundle --release --build-name=1.6.$PROJECT_BUILD_NUMBER --build-number=$(($BUILD_NUMBER+100))
        --no-shrink
      - |
        # generate signed universal apk with user specified keys
        android-app-bundle build-universal-apk \
          --bundle build/**/outputs/**/*.aab \
          --ks /tmp/keystore.keystore \
          --ks-pass $FCI_KEYSTORE_PASSWORD \
          --ks-key-alias $FCI_KEY_ALIAS \
          --key-pass $FCI_KEY_PASSWORD
      - |
        #!/bin/sh
        set -e
        set -x

        cd $FCI_BUILD_DIR/ios
        agvtool new-version -all $(($BUILD_NUMBER + 1))
      - find . -name "Podfile" -execdir pod install --repo-update \;
      - keychain initialize
      - app-store-connect fetch-signing-files "com.markaa.shop" --type IOS_APP_STORE --create
      - keychain add-certificates
      - xcode-project use-profiles
      - flutter build ipa --release --build-name=1.6.$(($PROJECT_BUILD_NUMBER+10)) --build-number=$(($BUILD_NUMBER+100))
    artifacts:
      - build/**/outputs/apk/**/*.apk
      - build/**/outputs/bundle/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - korkomaz@markaa.com
          - yahia.agwa@gmail.com
          - aidar@markaa.com
          - mjj@tritonian.com
      slack:
        channel: '#development'
        notify_on_build_start: true
